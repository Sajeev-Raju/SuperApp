import{s as lt,r as rt,o as nt}from"../chunks/DXpsuylB.js";import{S as ot,i as it,d as p,k as dt,l as ct,m as ut,n as et,a as T,b as r,o as mt,p as at,q as ft,r as n,c as u,e as M,u as pt,g as w,v as U,h as m,w as gt,j as I,s as ht,f as F,t as J}from"../chunks/p7MHL9ij.js";import{u as Y}from"../chunks/dHoYvIwq.js";import{g as P}from"../chunks/CnkrIbET.js";import{L as vt}from"../chunks/DXOzUfUJ.js";function st(i){let t,a;return{c(){t=m("p"),a=J(i[2]),this.h()},l(e){t=u(e,"P",{class:!0});var s=M(t);a=F(s,i[2]),s.forEach(p),this.h()},h(){n(t,"class","mt-1 text-sm text-danger-600")},m(e,s){T(e,t,s),r(t,a)},p(e,s){s&4&&ht(a,e[2])},d(e){e&&p(t)}}}function yt(i){let t;return{c(){t=J("Continue")},l(a){t=F(a,"Continue")},m(a,e){T(a,t,e)},d(a){a&&p(t)}}}function xt(i){let t,a="‚ü≥",e;return{c(){t=m("span"),t.textContent=a,e=J(`
          Loading...`),this.h()},l(s){t=u(s,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-70ggdd"&&(t.textContent=a),e=F(s,`
          Loading...`),this.h()},h(){n(t,"class","inline-block animate-spin mr-2")},m(s,g){T(s,t,g),T(s,e,g)},d(s){s&&(p(t),p(e))}}}function _t(i){let t,a,e,s,g,y,V="Welcome to NearMe",x,o,Q="Your hyperlocal community platform",$,_,h,k,R="Enter Your User ID",j,c,A,z,v,B,C,G='<p class="text-gray-600 dark:text-gray-400">Connect with your local community within a 15km radius</p>',O,L,K='<h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">What&#39;s NearMe?</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 bg-white dark:bg-gray-800 rounded-lg shadow"><div class="text-primary-500 text-2xl mb-2">Q&amp;A</div> <p class="text-gray-600 dark:text-gray-300">Ask and answer questions in your local area</p></div> <div class="p-4 bg-white dark:bg-gray-800 rounded-lg shadow"><div class="text-secondary-500 text-2xl mb-2">Meetups</div> <p class="text-gray-600 dark:text-gray-300">Create and join local events</p></div> <div class="p-4 bg-white dark:bg-gray-800 rounded-lg shadow"><div class="text-accent-500 text-2xl mb-2">Classifieds</div> <p class="text-gray-600 dark:text-gray-300">Buy, sell, and trade locally</p></div> <div class="p-4 bg-white dark:bg-gray-800 rounded-lg shadow"><div class="text-warning-500 text-2xl mb-2">Community</div> <p class="text-gray-600 dark:text-gray-300">Polls, alerts, and local discussions</p></div></div>',D,W,X;s=new vt({props:{size:"lg"}});let d=i[2]&&st(i);function Z(l,f){return l[1]?xt:yt}let q=Z(i),b=q(i);return{c(){t=m("div"),a=m("div"),e=m("div"),gt(s.$$.fragment),g=I(),y=m("h1"),y.textContent=V,x=I(),o=m("p"),o.textContent=Q,$=I(),_=m("form"),h=m("div"),k=m("label"),k.textContent=R,j=I(),c=m("input"),A=I(),d&&d.c(),z=I(),v=m("button"),b.c(),B=I(),C=m("div"),C.innerHTML=G,O=I(),L=m("div"),L.innerHTML=K,this.h()},l(l){t=u(l,"DIV",{class:!0});var f=M(t);a=u(f,"DIV",{class:!0});var E=M(a);e=u(E,"DIV",{class:!0});var N=M(e);pt(s.$$.fragment,N),g=w(N),y=u(N,"H1",{class:!0,"data-svelte-h":!0}),U(y)!=="svelte-genk3w"&&(y.textContent=V),x=w(N),o=u(N,"P",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-t9gdog"&&(o.textContent=Q),N.forEach(p),$=w(E),_=u(E,"FORM",{class:!0});var H=M(_);h=u(H,"DIV",{});var S=M(h);k=u(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),U(k)!=="svelte-16xt8rc"&&(k.textContent=R),j=w(S),c=u(S,"INPUT",{id:!0,name:!0,type:!0,class:!0,placeholder:!0}),A=w(S),d&&d.l(S),S.forEach(p),z=w(H),v=u(H,"BUTTON",{type:!0,class:!0});var tt=M(v);b.l(tt),tt.forEach(p),H.forEach(p),B=w(E),C=u(E,"DIV",{class:!0,"data-svelte-h":!0}),U(C)!=="svelte-qrzyc5"&&(C.innerHTML=G),E.forEach(p),O=w(f),L=u(f,"DIV",{class:!0,"data-svelte-h":!0}),U(L)!=="svelte-ax21zu"&&(L.innerHTML=K),f.forEach(p),this.h()},h(){n(y,"class","mt-6 text-3xl font-bold text-gray-900 dark:text-white"),n(o,"class","mt-2 text-gray-600 dark:text-gray-300"),n(e,"class","text-center"),n(k,"for","userId"),n(k,"class","label"),n(c,"id","userId"),n(c,"name","userId"),n(c,"type","text"),c.required=!0,n(c,"class","input"),n(c,"placeholder","User ID"),c.disabled=i[1],n(v,"type","submit"),n(v,"class","btn btn-primary w-full"),v.disabled=i[1],n(_,"class","mt-8 space-y-6"),n(C,"class","mt-6 text-center text-sm"),n(a,"class","w-full max-w-md p-8 space-y-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg"),n(L,"class","mt-8 text-center max-w-md"),n(t,"class","min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-gray-900 dark:to-gray-800")},m(l,f){T(l,t,f),r(t,a),r(a,e),mt(s,e,null),r(e,g),r(e,y),r(e,x),r(e,o),r(a,$),r(a,_),r(_,h),r(h,k),r(h,j),r(h,c),et(c,i[0]),r(h,A),d&&d.m(h,null),r(_,z),r(_,v),b.m(v,null),r(a,B),r(a,C),r(t,O),r(t,L),D=!0,W||(X=[at(c,"input",i[4]),at(_,"submit",ft(i[3]))],W=!0)},p(l,[f]){(!D||f&2)&&(c.disabled=l[1]),f&1&&c.value!==l[0]&&et(c,l[0]),l[2]?d?d.p(l,f):(d=st(l),d.c(),d.m(h,null)):d&&(d.d(1),d=null),q!==(q=Z(l))&&(b.d(1),b=q(l),b&&(b.c(),b.m(v,null))),(!D||f&2)&&(v.disabled=l[1])},i(l){D||(ut(s.$$.fragment,l),D=!0)},o(l){ct(s.$$.fragment,l),D=!1},d(l){l&&p(t),dt(s),d&&d.d(),b.d(),W=!1,rt(X)}}}function bt(i,t,a){let e="",s=!1,g="";nt(()=>{{const x=localStorage.getItem("userId");x&&(Y.setUserId(x),localStorage.getItem("userLocation")?P("/dashboard"):P("/setup"))}});async function y(){if(!e.trim()){a(2,g="Please enter a User ID");return}a(1,s=!0),a(2,g="");try{Y.setUserId(e),localStorage.setItem("userId",e);const o=await(await fetch(`http://localhost:8080/api/location/${e}`)).json();o&&o.latitude&&o.longitude?(Y.setLocation({latitude:o.latitude,longitude:o.longitude,locationName:o.locationName||"My Location"}),localStorage.setItem("userLocation",JSON.stringify({latitude:o.latitude,longitude:o.longitude,locationName:o.locationName||"My Location"})),P("/dashboard")):P("/setup")}catch(x){console.error("Error:",x),P("/setup")}finally{a(1,s=!1)}}function V(){e=this.value,a(0,e)}return[e,s,g,y,V]}class Mt extends ot{constructor(t){super(),it(this,t,bt,_t,lt,{})}}export{Mt as component};
