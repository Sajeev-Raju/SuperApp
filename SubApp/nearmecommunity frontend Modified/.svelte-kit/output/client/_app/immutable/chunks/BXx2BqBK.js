import{u as m}from"./dHoYvIwq.js";import{g}from"./DXpsuylB.js";const p="http://localhost:8080";async function t(e,{method:s="GET",body:a,headers:d={},isFormData:r=!1}={}){const n=g(m).userId;if(!n)throw new Error("User ID not found");const c=`${p}${e}`,i={method:s,headers:{"X-User-ID":n,...!r&&{"Content-Type":"application/json"},...d},credentials:"include"};a&&(i.body=r?a:JSON.stringify(a));const o=await fetch(c,i);if(!o.ok){const l=(await o.json().catch(()=>({}))).message||`API error: ${o.status}`;throw new Error(l)}const u=o.headers.get("content-type");return u&&u.includes("application/json")?await o.json():await o.text()}const h={saveLocation:e=>t("/api/location/save",{method:"POST",body:e}),getLocation:e=>t(`/api/location/${e}`)},y={getQuestions:()=>t("/api/qanda/questions"),getQuestion:e=>t(`/api/qanda/questions/${e}`),createQuestion:e=>t("/api/qanda/questions",{method:"POST",body:e}),postAnswer:e=>t("/api/qanda/answers",{method:"POST",body:e}),addNote:(e,s)=>t(`/api/qanda/questions/${e}/notes`,{method:"POST",body:s}),getTags:()=>t("/api/qanda/tags")},f={getMeetups:()=>t("/api/meetups"),getMeetup:e=>t(`/api/meetups/${e}`),createMeetup:e=>t("/api/meetups",{method:"POST",body:e,isFormData:!0}),getUserMeetups:()=>t("/api/meetups/MyEvents"),updateMeetupNote:(e,s)=>t(`/api/meetups/${e}/note`,{method:"PATCH",body:s}),deleteMeetup:e=>t(`/api/meetups/${e}`,{method:"DELETE"}),searchMeetups:e=>{const s=new URLSearchParams;return e.forEach(a=>s.append("tags",a)),t(`/api/meetups/search?${s.toString()}`)},getMeetupImageUrl:e=>`${p}/api/meetups/${e}/image`,postMeetupQuestion:(e,s)=>t(`/api/meetups/${e}/questions`,{method:"POST",body:s})},P={getClassifieds:()=>t("/api/classified"),getClassified:e=>t(`/api/classified/${e}`),createClassified:e=>t("/api/classified",{method:"POST",body:e,isFormData:!0}),getCategories:()=>t("/api/classified/categories"),deleteClassified:e=>t(`/api/classified/${e}`,{method:"DELETE"}),addNote:(e,s)=>t(`/api/classified/${e}/notes`,{method:"POST",body:s}),askQuestion:e=>t("/api/classified/question",{method:"POST",body:e})},q={getPolls:()=>t("/api/polls/questions"),createPoll:e=>t("/api/polls/questions",{method:"POST",body:e}),getPollResults:e=>t(`/api/polls/questions/${e}/results`),vote:(e,s)=>t(`/api/questions/${e}/vote`,{method:"POST",body:s}),getVotedPolls:()=>t("/api/polls/questions/voted"),deletePoll:e=>t(`/api/polls/questions/${e}`,{method:"DELETE"})},T={getMessages:()=>t("/api/emergency_messages"),createMessage:e=>t("/api/emergency_messages",{method:"POST",body:e}),askQuestion:(e,s)=>t(`/api/emergency/messages/${e}/question`,{method:"POST",body:s}),addNote:(e,s)=>t(`/api/emergency/messages/${e}/note`,{method:"POST",body:s})},O={location:h,qanda:y,meetups:f,classifieds:P,polls:q,emergency:T};export{O as a};
