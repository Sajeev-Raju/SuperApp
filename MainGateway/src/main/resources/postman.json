{
    "info": {
        "name": "Registration-Login Service API Tests",
        "description": "Collection for testing the Registration-Login service through API Gateway",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Registration Flow",
            "item": [
                {
                    "name": "1. Start Registration",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/register/start",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "register", "start"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"phone\": \"1234567890\"\n}"
                        }
                    }
                },
                {
                    "name": "2. Verify OTP",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/register/verify-otp",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "register", "verify-otp"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"phone\": \"1234567890\",\n    \"emailOtp\": \"123456\",\n    \"phoneOtp\": \"123456\"\n}"
                        }
                    }
                },
                {
                    "name": "3. Validate Username",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/register/validate-username",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "register", "validate-username"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"phone\": \"1234567890\",\n    \"username\": \"testuser\"\n}"
                        }
                    }
                },
                {
                    "name": "4. Complete Registration",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/register/complete",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "register", "complete"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"phone\": \"1234567890\",\n    \"username\": \"testuser\"\n}"
                        }
                    }
                }
            ]
        },
        {
            "name": "Login Flow",
            "item": [
                {
                    "name": "1. Send Login OTP",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/login/send-otp",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "login", "send-otp"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"testuser\"\n}"
                        }
                    }
                },
                {
                    "name": "2. Verify Login OTP",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/login/verify",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "login", "verify"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"testuser\",\n    \"otp\": \"123456\"\n}"
                        }
                    }
                },
                {
                    "name": "3. Continue with Oldest Logout",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/login/continue-with-oldest-logout",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "login", "continue-with-oldest-logout"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"testuser\"\n}"
                        }
                    }
                }
            ]
        },
        {
            "name": "Protected Endpoints",
            "item": [
                {
                    "name": "1. Access Protected Data (Without Session)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "http://localhost:8080/api/protected/data",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "protected", "data"]
                        }
                    }
                },
                {
                    "name": "2. Access Protected Data (With Session)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-Session-ID",
                                "value": "{{sessionId}}"
                            },
                            {
                                "key": "X-Username",
                                "value": "{{username}}"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/protected/data",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "protected", "data"]
                        }
                    }
                }
            ]
        },
        {
            "name": "Session Management",
            "item": [
                {
                    "name": "Validate Session",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "http://localhost:8080/api/session/validate",
                            "protocol": "http",
                            "host": ["localhost"],
                            "port": "8080",
                            "path": ["api", "session", "validate"]
                        },
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"{{username}}\",\n    \"sessionId\": \"{{sessionId}}\"\n}"
                        }
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "sessionId",
            "value": "testuser_1234567890",
            "type": "string"
        },
        {
            "key": "username",
            "value": "testuser",
            "type": "string"
        }
    ]
}